<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http equiv ="X-UA-Compatible" content ="IE-edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src = "https://kit.fontawesome.com/f97427a625.js" crossorigin="anonymous"></script>
    <link rel ="stylesheet" href ="style.css">
    <title>HTML, CSS and JS Compiler</title>
  </head>
  <body>
    <div class="wrapper">
      <!-- This is where we will type code -->
      <div class="input">
        <div class="editor"> 
          <label><i class = "fa-brands fa-html5"></i>HTML</label>
          <textarea class="html" onkeyup="compileCode()"></textarea>
        </div>
        <div class="editor">
          <label><i class = "fa-brands fa-css3-alt"></i>CSS</label>
          <textarea class="css" onkeyup="compileCode()"></textarea>
        </div>
        <div class="editor">
          <label><i class = "fa-brands fa-square-js"></i>JavaScript</label>
          <textarea class="javascript" onkeyup="compileCode()"></textarea>
        </div>
      </div>
      <!-- This is where the result will be displayed -->
      <div class = "output">
      <label><i class = "fa-solid fa-play"></i>Result</label>
      <iframe class="display"></iframe>
    </div>
    </div>
    <button type="submit" class="btn btn-primary" style="margin-left:0px;">Submit</button>
  </form>
  <a href="#" onclick="downloadFile()">Download File</a>
  </body>

  <script src="script.js"></script>
  <script>
    function downloadFile() {
      // data is retrieved from the textarea
      const data = document.querySelector('.editor').textContent
  
      // a blob object and a url resource to a blob object is created,
      // following lines till a.download are required to make
      // a window appear prompting the location of the download
      const blob = new Blob([data], { type: 'text/plain' })
      const url = window.URL.createObjectURL(blob)
  
      const a = document.createElement('a')
      a.href = url
      a.download = 'program.txt'
  
      // this element is NOT present on the DOM.
      // A click is simulated to go to the specified link
      a.click()
  
      // removal of redundant parameters
      // BLOB SHOULD NOT BE REMOVED!
      window.URL.revokeObjectURL(url)
      a.remove()
    }
  </script>
  
</html>